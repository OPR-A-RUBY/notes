<p id="notice"><%= notice %></p>

<h1>Notes</h1>

<% if user_signed_in? %> <!-- ЕСЛИ КЛИЕНТ: то выводим две следующие таблицы: -->
  <table>
    <thead>             <!-- ПЕРВАЯ ТАБЛИЦА: - этого клиента (скрытые) -->
      <tr>
          <th>Category</th>
          <th>Id</th>
          <th>Title</th>
          <th>User</th>
          <th>Label</th>
          <th>Public</th>
          <th>Level</th>
          <th>Stars</th>
          <th>Description</th>
          <th>Body</th>
          <th>Url</th>
          <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @notes_closed.each do |note| %> <!-- СКРЫТЫЕ -->
          <tr>
            <td><%= 'Private' %></td>
            <td><%= note.id %></td>
            <td><%= note.title %></td>
            <td><%= note.user_id %></td>
            <td><%= note.label_id %></td>
            <td><%= note.public %></td>
            <td><%= note.level %></td>
            <td><%= note.stars %></td>
            <td><%= note.description %></td>
            <td><%= note.body %></td>
            <td><%= note.url %></td>
            <td><%= link_to 'Show', note %></td>
            <% if user_signed_in? %>             <!-- выводить DELETE & EDIT только если КЛИЕНТ, а дальше -->
              <% if current_user.id == note.user_id %> <!-- выводить DELETE & EDIT если КЛИЕНТ есть АВТОР -->
                <td><%= link_to 'Edit', edit_note_path(note) %></td>
                <td><%= link_to 'Destroy', note, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              <% end %> <!-- /if current... -->
            <% end %> <!-- /if user... -->  
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <table>
    <thead>             <!-- ВТОРАЯ ТАБЛИЦА: - этого клиента (открытые) -->
      <tr>
          <th>Category</th>
          <th>Id</th>
          <th>Title</th>
          <th>User</th>
          <th>Label</th>
          <th>Public</th>
          <th>Level</th>
          <th>Stars</th>
          <th>Description</th>
          <th>Body</th>
          <th>Url</th>
          <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @notes_open.each do |note| %> <!-- ОТКРЫТЫЕ -->
          <tr>
            <td><%= 'Public' %></td>
            <td><%= note.id %></td>
            <td><%= note.title %></td>
            <td><%= note.user_id %></td>
            <td><%= note.label_id %></td>
            <td><%= note.public %></td>
            <td><%= note.level %></td>
            <td><%= note.stars %></td>
            <td><%= note.description %></td>
            <td><%= note.body %></td>
            <td><%= note.url %></td>
            <td><%= link_to 'Show', note %></td>
            <% if user_signed_in? %>             <!-- выводить DELETE & EDIT только если КЛИЕНТ, а дальше -->
              <% if current_user.id == note.user_id %> <!-- выводить DELETE & EDIT если КЛИЕНТ есть АВТОР -->
                <td><%= link_to 'Edit', edit_note_path(note) %></td>
                <td><%= link_to 'Destroy', note, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              <% end %> <!-- /if current... -->
            <% end %> <!-- /if user... -->  
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %> <!-- /if user... -->

<br>                            <!-- ДАЛЬШЕ всегда выводим таблицу и для КЛИЕНТА, и для ГОСТЯ --> 

<table>
  <thead>                       <!-- ТРЕТЬЯ ТАБЛИЦА: - чужие публичные записки -->
    <tr>
        <th>Category</th>       <!-- для ГОСТЯ все публичные записки есть "чужие" -->
        <th>Id</th>
        <th>Title</th>
        <th>User</th>
        <th>Label</th>
        <th>Public</th>
        <th>Level</th>
        <th>Stars</th>
        <th>Description</th>
        <th>Body</th>
        <th>Url</th>
        <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @notes_public.each do |note| %>
        <tr>
          <td><%= 'Others' %></td>
          <td><%= note.id %></td>
          <td><%= note.title %></td>
          <td><%= note.user_id %></td>
          <td><%= note.label_id %></td>
          <td><%= note.public %></td>
          <td><%= note.level %></td>
          <td><%= note.stars %></td>
          <td><%= note.description %></td>
          <td><%= note.body %></td>
          <td><%= note.url %></td>
          <td><%= link_to 'Show', note %></td>
          <% if user_signed_in? %>             <!-- выводить DELETE & EDIT только если КЛИЕНТ, а дальше -->
            <% if current_user.id == note.user_id %> <!-- выводить DELETE & EDIT если КЛИЕНТ есть АВТОР -->
              <td><%= link_to 'Edit', edit_note_path(note) %></td>
              <td><%= link_to 'Destroy', note, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% end %> <!-- /if current... -->
          <% end %> <!-- /if user... -->  
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Note', new_note_path %>
